# 断层地质数据分析工具集

本项目提供了一套基于 MATLAB 的脚本，用于对断层地质数据进行多维度、多指标的量化分析。通过顺序执行这些脚本，可以从原始的断层图像和数据出发，逐步计算出分形维数、断层密度、尖灭点数量以及断层强度指数等关键指标，最终将所有结果整合到一个 CSV 文件中，为地质风险评估和区域稳定性分析提供数据支持。

## 文件结构

```
Fault/
├── R1/                           # R1FWZ.m 的辅助函数
├── R2/                           # R2DCMD.m 的辅助函数
├── R1FWZ.m                       # 步骤一：计算分形维数
├── R2DCMD.m                      # 步骤二：计算断层（多边形）密度
├── R3JDJMD.m                     # 步骤三：计算断层线交点与尖灭点
├── R4DCQDZS.m                    # 步骤四：计算断层强度指数
└── 工作区域说明.txt              # 脚本命名说明
```

## 工作流程

请务必按照以下顺序执行脚本，因为后一步的计算依赖于前一步的输出结果。

### 步骤一：分形维数计算 (`R1FWZ.m`)

- **功能**: 此脚本读取带地理参考的断层图像（TIF格式），通过计盒法计算每个网格的分形维数。
- **输入**:
    - `faults_georef.tif`: 地理参考的断层图像文件。
- **核心参数 (在脚本内修改)**:
    - `IMAGE_PATH`: 输入图像路径。
    - `GRID_SIZE_METERS`: 分析网格的大小（米）。
- **输出**:
    - `分维值结果.csv`: 包含每个有效网格的坐标和分形维数等信息。
    - `分维值计算日志.txt`: 记录脚本运行过程的日志。
    - 多个可视化图形窗口，展示原始图像、网格划分和分形维数热力图。

### 步骤二：断层密度计算 (`R2DCMD.m`)

- **功能**: 此脚本计算每个网格与多少个断层线（视为多边形边界）相交，以此作为断层密度的衡量标准。
- **输入**:
    - `分维值结果.csv`: 由步骤一生成。
    - `新的断层数据/` (文件夹): 包含多个CSV文件，每个文件代表一个断层（多边形）的顶点坐标。
- **输出**:
    - `分维值_密度.csv`: 在前一步结果的基础上，增加了 `polygon_intersection_count` 列，记录每个网格的断层相交数量。

### 步骤三：尖灭点与交点计算 (`R3JDJMD.m`)

- **功能**: 此脚本在步骤二的基础上，进一步计算两个指标：1) 每个网格与断层线的相交次数；2) 落入每个网格内的断层尖灭点（锐角顶点）数量。
- **输入**:
    - `分维值_密度.csv`: 由步骤二生成。
    - `新的断层数据/` (文件夹): 同上。
- **输出**:
    - `分维值_密度_尖灭点.csv`: 在前一步结果的基础上，更新了 `polygon_intersection_count` 列，并增加了 `tip_point_count` 列。

### 步骤四：断层强度指数计算 (`R4DCQDZS.m`)

- **功能**: 此脚本综合考虑断层的几何形态（面积、周长）和空间位置，计算每个网格的“断层强度指数”。该指数反映了断层对特定区域影响的强度。
- **输入**:
    - `分维值_密度_尖灭点.csv`: 由步骤三生成。
    - `断层信息.csv`: 包含每个断层的总体信息，如名称(N)、总面积(S)和总周长(C)。
    - `新的断层数据/` (文件夹): 同上。
- **输出**:
    - `分维值_密度_尖灭点_断层强度.csv`: 最终结果文件。在步骤三结果的基础上，增加了 `FaultStrengthIndex` 列。

## 如何运行

1.  **准备数据**: 确保所有必需的输入文件（`.tif` 图像, `断层信息.csv`）和数据文件夹（`新的断层数据/`）已放置在正确的路径下。
2.  **配置脚本**: 根据需要检查并修改每个 `.m` 脚本头部的参数，特别是文件路径和处理参数。
3.  **顺序执行**: 在 MATLAB 环境中，依次运行 `R1FWZ.m`, `R2DCMD.m`, `R3JDJMD.m`, 和 `R4DCQDZS.m`。
4.  **查看结果**: 执行完毕后，`分维值_密度_尖灭点_断层强度.csv` 文件将包含所有计算出的指标，可用于后续的数据分析和可视化。
